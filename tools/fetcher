#!/usr/bin/env bash

cd "$(dirname ${BASH_SOURCE[0]})"
basedir="$(pwd)"

. ${basedir}/package-manager

read -r -p "Do you want to enable the firewall ? [y/N] " response
if [[ "$response" =~ ^([yY][eE][sS]|[yY])$ ]]; then
    yes | ${package_manager} -Sy --answerclean=All --answerdiff=None --answeredit=None \
        ufw \
        firewalld
    
    sudo systemctl enable --now ufw.service
    sudo ufw enable
fi

echo "Installing default packages"
. ${basedir}/packages-list
yes | ${package_manager} -Sy --answerclean=All --answerdiff=None --answeredit=None \
    $packages

read -r -p "Do you want to enable amdgpu hardware audio/video decoding ? [y/N] " response
if [[ "$response" =~ ^([yY][eE][sS]|[yY])$ ]]; then
    . ${basedir}/amd-va-packages-list
    yes | ${package_manager} -Sy --answerclean=All --answerdiff=None --answeredit=None \
        $amd_va_packages
    echo "Hardware Audio/Video acceleration enabled !"
fi